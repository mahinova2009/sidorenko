<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Форма регистрации</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #E5E5E5;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }

  .form-container {
    background-color: #FFFFFF;
    border-radius: 12px;
    padding: 30px 40px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 400px;
  }

  h3 {
    text-align: center;
    color: #0088CC;
    margin-bottom: 20px;
  }

  label {
    display: block;
    margin-bottom: 12px;
    font-weight: 500;
    color: #333333;
  }

  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="date"],
  input[type="search"] {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #CCCCCC;
    border-radius: 8px;
    font-size: 15px;
    transition: border-color 0.2s;
    box-sizing: border-box;
    margin-bottom: 15px;
  }

  input:focus {
    outline: none;
    border-color: #0088CC;
    box-shadow: 0 0 4px rgba(0,136,204,0.3);
  }

  button {
    width: 100%;
    padding: 12px 0;
    background-color: #0088CC;
    color: #FFFFFF;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.2s;
    font-weight: bold;
    margin-top: 15px;
  }

  button:hover {
    background-color: #006699;
  }

  .message {
    text-align: center;
    margin-top: 15px;
    font-weight: bold;
  }

  .message.success { color: #008800; }
  .message.error { color: #CC0000; }

  .lang-switch {
    text-align: center;
    margin-bottom: 15px;
    display: flex;
    justify-content: center;
    gap: 8px;
  }
  .lang-switch button {
    width: 40px;
    height: 40px;
    border: 1px solid #ccc;
    background: #f8f8f8;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    color: #333;
  }
  .lang-switch button.active {
    background: #0088CC;
    color: #fff;
  }

  .consent {
    display: flex;
    align-items: center;
    margin-top: 10px;
    font-size: 14px;
  }
  .consent input {
    margin-right: 8px;
  }

  .country-list {
    position: absolute;
    width: 100%;
    background: white;
    border: 1px solid #ccc;
    max-height: 150px;
    overflow-y: auto;
    border-radius: 6px;
    z-index: 10;
    display: none;
  }
  .country-list div {
    padding: 8px;
    cursor: pointer;
  }
  .country-list div:hover {
    background: #f0f0f0;
  }
</style>
</head>
<body>

<div class="form-container">
  <h3 id="formTitle">Регистрация</h3>
  <div class="lang-switch">
    <button data-lang="ru" class="active">RU</button>
    <button data-lang="ro">RO</button>
    <button data-lang="en">EN</button>
  </div>
  <form id="registrationForm">
    <input type="search" id="countrySearch" placeholder="Поиск страны..." autocomplete="off">
    <div id="countryList" class="country-list"></div>

    <input type="hidden" name="country" id="countryHidden">
    <input type="hidden" name="timezone" id="timezoneHidden">

    <input type="tel" name="phone" id="phoneInput" required placeholder="Введите номер телефона">
    <input type="text" name="fullName" id="fullNameInput" required placeholder="Введите ваше ФИО">
    <input type="email" name="email" id="emailInput" required placeholder="Введите ваш Email">
    <input type="date" name="birthDate" id="birthDateInput" required>

    <div class="consent">
      <input type="checkbox" id="consentCheckbox" required>
      <label for="consentCheckbox" id="consentLabel">Я согласен на обработку персональных данных</label>
    </div>

    <input type="hidden" name="chat_id" id="chat_id">

    <button type="submit" id="submitBtn">Отправить</button>
    <div id="formMessage" class="message"></div>
  </form>
</div>

<script>
const translations = {
  ru: {
    title: "Регистрация",
    placeholders: {
      country: "Поиск страны...",
      phone: "Введите номер телефона",
      fullName: "Введите ваше ФИО",
      email: "Введите ваш Email",
      birthDate: "Дата рождения"
    },
    consent: "Я согласен на обработку персональных данных",
    submit: "Отправить"
  },
  ro: {
    title: "Înregistrare",
    placeholders: {
      country: "Căutare țară...",
      phone: "Introduceți numărul de telefon",
      fullName: "Introduceți numele complet",
      email: "Introduceți emailul",
      birthDate: "Data nașterii"
    },
    consent: "Sunt de acord cu prelucrarea datelor personale",
    submit: "Trimite"
  },
  en: {
    title: "Registration",
    placeholders: {
      country: "Search country...",
      phone: "Enter your phone number",
      fullName: "Enter your full name",
      email: "Enter your email",
      birthDate: "Date of birth"
    },
    consent: "I agree to the processing of personal data",
    submit: "Submit"
  }
};

// переключение языков
document.querySelectorAll('.lang-switch button').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.lang-switch button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const lang = btn.dataset.lang;
    document.getElementById('formTitle').textContent = translations[lang].title;
    document.getElementById('countrySearch').placeholder = translations[lang].placeholders.country;
    document.getElementById('phoneInput').placeholder = translations[lang].placeholders.phone;
    document.getElementById('fullNameInput').placeholder = translations[lang].placeholders.fullName;
    document.getElementById('emailInput').placeholder = translations[lang].placeholders.email;
    document.getElementById('birthDateInput').placeholder = translations[lang].placeholders.birthDate;
    document.getElementById('consentLabel').textContent = translations[lang].consent;
    document.getElementById('submitBtn').textContent = translations[lang].submit;
  });
});

// chat_id из URL
const chatIdField = document.getElementById('chat_id');
const urlParams = new URLSearchParams(window.location.search);
chatIdField.value = urlParams.get('chat_id') || '';

// имитация выбора страны и автокода (пример для Молдовы)
document.getElementById('countrySearch').addEventListener('input', (e) => {
  if (e.target.value.toLowerCase().includes("молд") || e.target.value.toLowerCase().includes("mold")) {
    document.getElementById('phoneInput').value = "+373 ";
    document.getElementById('countryHidden').value = "Молдова";
  }
});
</script>

</body>
</html>
