<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Форма регистрации</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #E5E5E5;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }

  .form-container {
    background-color: #FFFFFF;
    border-radius: 12px;
    padding: 30px 40px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 400px;
  }

  h3 {
    text-align: center;
    color: #0088CC;
    margin-bottom: 25px;
  }

  label {
    display: block;
    margin-bottom: 15px;
    font-weight: 500;
    color: #333333;
  }

  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="date"],
  input[type="search"],
  select {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #CCCCCC;
    border-radius: 8px;
    font-size: 15px;
    transition: border-color 0.2s;
    box-sizing: border-box;
  }

  input:focus, select:focus {
    outline: none;
    border-color: #0088CC;
    box-shadow: 0 0 4px rgba(0,136,204,0.3);
  }

  button {
    width: 100%;
    padding: 12px 0;
    background-color: #0088CC;
    color: #FFFFFF;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.2s;
    font-weight: bold;
    margin-top: 20px;
  }

  button:hover {
    background-color: #006699;
  }

  .message {
    text-align: center;
    margin-top: 15px;
    font-weight: bold;
  }

  .message.success {
    color: #008800;
  }

  .message.error {
    color: #CC0000;
  }

  .country-dropdown {
    position: relative;
  }

  .country-list {
    position: absolute;
    width: 100%;
    background: white;
    border: 1px solid #ccc;
    max-height: 150px;
    overflow-y: auto;
    border-radius: 6px;
    z-index: 10;
    display: none;
  }

  .country-list div {
    padding: 8px;
    cursor: pointer;
  }

  .country-list div:hover {
    background: #f0f0f0;
  }

  .lang-switch {
    text-align: center;
    margin-bottom: 15px;
  }
  .lang-switch button {
    margin: 0 5px;
    padding: 5px 10px;
    border: 1px solid #ccc;
    background: #f8f8f8;
    border-radius: 5px;
    cursor: pointer;
  }
  .lang-switch button.active {
    background: #0088CC;
    color: #fff;
  }
</style>
</head>
<body>

<div class="form-container">
  <h3 id="formTitle">Регистрация</h3>
  <div class="lang-switch">
    <button data-lang="ru" class="active">RU</button>
    <button data-lang="ro">RO</button>
    <button data-lang="en">EN</button>
  </div>
  <form id="registrationForm">
    <label id="labelCountry">Страна</label>
    <div class="country-dropdown">
      <input type="search" id="countrySearch" placeholder="Поиск страны..." autocomplete="off">
      <div id="countryList" class="country-list"></div>
    </div>

    <input type="hidden" name="country" id="countryHidden">
    <input type="hidden" name="timezone" id="timezoneHidden">

    <label id="labelPhone">Телефон
      <input type="tel" name="phone" id="phoneInput" required placeholder="Введите номер телефона">
    </label>
    <label id="labelFullName">ФИО
      <input type="text" name="fullName" required placeholder="Введите ваше ФИО">
    </label>
    <label id="labelEmail">Email
      <input type="email" name="email" required placeholder="Введите ваш Email">
    </label>
    <label id="labelBirthDate">Дата рождения
      <input type="date" name="birthDate" required>
    </label>

    <input type="hidden" name="chat_id" id="chat_id">

    <button type="submit" id="submitBtn">Отправить</button>
    <div id="formMessage" class="message"></div>
  </form>
</div>

<script>
const countries = [
  { names: ["Молдова","Moldova"], offset: "0", code: "+373" },
  { names: ["Россия","Russia (Moscow)"], offset: "+1", code: "+7" },
  { names: ["Украина","Ukraine (Kyiv)"], offset: "0", code: "+380" },
  { names: ["Румыния","Romania"], offset: "0", code: "+40" },
  { names: ["Греция","Greece"], offset: "0", code: "+30" },
  { names: ["Турция","Turkey"], offset: "+1", code: "+90" },
  { names: ["США","USA","United States"], offset: "-7", code: "+1" }
];

const translations = {
  ru: {
    title: "Регистрация",
    country: "Страна",
    phone: "Телефон",
    fullName: "ФИО",
    email: "Email",
    birthDate: "Дата рождения",
    submit: "Отправить"
  },
  ro: {
    title: "Înregistrare",
    country: "Țara",
    phone: "Telefon",
    fullName: "Nume complet",
    email: "Email",
    birthDate: "Data nașterii",
    submit: "Trimite"
  },
  en: {
    title: "Registration",
    country: "Country",
    phone: "Phone",
    fullName: "Full Name",
    email: "Email",
    birthDate: "Date of Birth",
    submit: "Submit"
  }
};

const searchInput = document.getElementById('countrySearch');
const listDiv = document.getElementById('countryList');
const countryHidden = document.getElementById('countryHidden');
const timezoneHidden = document.getElementById('timezoneHidden');
const phoneInput = document.getElementById('phoneInput');

// вывод списка стран
searchInput.addEventListener('input', () => {
  const query = searchInput.value.toLowerCase();
  listDiv.innerHTML = '';
  if (query.length > 0) {
    const filtered = countries.filter(c => c.names.some(n => n.toLowerCase().includes(query)));
    filtered.forEach(c => {
      const div = document.createElement('div');
      div.textContent = `${c.names[0]} (UTC${c.offset})`;
      div.addEventListener('click', () => {
        searchInput.value = c.names[0];
        countryHidden.value = c.names[0];
        timezoneHidden.value = c.offset;
        phoneInput.value = c.code + " ";
        listDiv.style.display = 'none';
      });
      listDiv.appendChild(div);
    });
    listDiv.style.display = filtered.length ? 'block' : 'none';
  } else {
    listDiv.style.display = 'none';
  }
});

// переключение языков
document.querySelectorAll('.lang-switch button').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.lang-switch button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const lang = btn.dataset.lang;
    document.getElementById('formTitle').textContent = translations[lang].title;
    document.getElementById('labelCountry').textContent = translations[lang].country;
    document.getElementById('labelPhone').childNodes[0].textContent = translations[lang].phone;
    document.getElementById('labelFullName').childNodes[0].textContent = translations[lang].fullName;
    document.getElementById('labelEmail').childNodes[0].textContent = translations[lang].email;
    document.getElementById('labelBirthDate').childNodes[0].textContent = translations[lang].birthDate;
    document.getElementById('submitBtn').textContent = translations[lang].submit;
  });
});

// chat_id из URL
const chatIdField = document.getElementById('chat_id');
const urlParams = new URLSearchParams(window.location.search);
chatIdField.value = urlParams.get('chat_id') || '';
</script>

</body>
</html>
